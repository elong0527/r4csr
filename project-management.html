<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to prepare tables, listings, and figures for clinical study report and submit to regulatory agencies, the essential part of clinical trial development.">
<title>R for Clinical Study Reports and Submission - 12&nbsp; Project management</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./submission-overview.html" rel="next">
<link href="./project-folder.html" rel="prev">
<link href="./assets/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MKYDL3PNW1"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MKYDL3PNW1', { 'anonymize_ip': true});
</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<meta property="og:title" content="R for Clinical Study Reports and Submission - 12&nbsp; Project management">
<meta property="og:description" content="Learn how to prepare tables, listings, and figures for clinical study report and submit to regulatory agencies, the essential part of clinical trial development.">
<meta property="og:image" content="https://r4csr.org/assets/preview.jpg">
<meta property="og:site_name" content="R for Clinical Study Reports and Submission">
<meta name="twitter:title" content="R for Clinical Study Reports and Submission - 12&nbsp; Project management">
<meta name="twitter:description" content="Learn how to prepare tables, listings, and figures for clinical study report and submit to regulatory agencies, the essential part of clinical trial development.">
<meta name="twitter:image" content="https://r4csr.org/assets/preview.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./project-overview.html">Clinical trial project</a></li><li class="breadcrumb-item"><a href="./project-management.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Project management</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Clinical Study Reports and Submission</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/elong0527/r4csr" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Delivering TLFs in CSR</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-disposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Disposition</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-population.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Analysis population</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-baseline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Baseline characteristics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-efficacy-ancova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Efficacy table</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-efficacy-km.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Efficacy figure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-ae-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">AE summary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-ae-specific.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Specific AE</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tlf-assemble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Assemble TLFs</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Clinical trial project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project-folder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Project folder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project-management.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Project management</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">eCTD submission</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./submission-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./submission-package.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Submission package</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./submission-environment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Running environment</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#setting-up-for-success" id="toc-setting-up-for-success" class="nav-link active" data-scroll-target="#setting-up-for-success"><span class="header-section-number">12.1</span> Setting up for success</a>
  <ul class="collapse">
<li><a href="#work-as-a-team" id="toc-work-as-a-team" class="nav-link" data-scroll-target="#work-as-a-team"><span class="header-section-number">12.1.1</span> Work as a team</a></li>
  <li><a href="#design-clean-code-architecture" id="toc-design-clean-code-architecture" class="nav-link" data-scroll-target="#design-clean-code-architecture"><span class="header-section-number">12.1.2</span> Design clean code architecture</a></li>
  <li><a href="#set-capability-boundaries" id="toc-set-capability-boundaries" class="nav-link" data-scroll-target="#set-capability-boundaries"><span class="header-section-number">12.1.3</span> Set capability boundaries</a></li>
  <li><a href="#contribute-to-the-community" id="toc-contribute-to-the-community" class="nav-link" data-scroll-target="#contribute-to-the-community"><span class="header-section-number">12.1.4</span> Contribute to the community</a></li>
  </ul>
</li>
  <li><a href="#the-sdlc" id="toc-the-sdlc" class="nav-link" data-scroll-target="#the-sdlc"><span class="header-section-number">12.2</span> The SDLC</a></li>
  <li><a href="#planning" id="toc-planning" class="nav-link" data-scroll-target="#planning"><span class="header-section-number">12.3</span> Planning</a></li>
  <li><a href="#development" id="toc-development" class="nav-link" data-scroll-target="#development"><span class="header-section-number">12.4</span> Development</a></li>
  <li><a href="#validation" id="toc-validation" class="nav-link" data-scroll-target="#validation"><span class="header-section-number">12.5</span> Validation</a></li>
  <li><a href="#operation" id="toc-operation" class="nav-link" data-scroll-target="#operation"><span class="header-section-number">12.6</span> Operation</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/elong0527/r4csr/edit/main/project-management.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/elong0527/r4csr/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/elong0527/r4csr/blob/main/project-management.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./project-overview.html">Clinical trial project</a></li><li class="breadcrumb-item"><a href="./project-management.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Project management</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-manage" class="quarto-section-identifier"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Project management</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="setting-up-for-success" class="level2" data-number="12.1"><h2 data-number="12.1" class="anchored" data-anchor-id="setting-up-for-success">
<span class="header-section-number">12.1</span> Setting up for success</h2>
<p>A clinical data analysis project is not unlike typical data analysis projects or software projects. Therefore, the conventional wisdom and tricks for managing a successful project are also applicable here. At the same time, clinical projects also have unique traits, such as high standards for planning, development, validation, and delivery under strict time constraints.</p>
<p>Although many factors determine if a project can execute efficiently, we believe a few aspects are critical for long-term success, especially when managing clinical data analysis projects at scale.</p>
<section id="work-as-a-team" class="level3" data-number="12.1.1"><h3 data-number="12.1.1" class="anchored" data-anchor-id="work-as-a-team">
<span class="header-section-number">12.1.1</span> Work as a team</h3>
<p>As a general principle, all the team members involved in a project should take basic training on project management and understand how to work as a development team. <span class="citation" data-cites="teamgeek">Fitzpatrick and Collins-Sussman (<a href="references.html#ref-teamgeek" role="doc-biblioref">2012</a>)</span> provides some valuable tips on this topic. As always, setting a clear goal and following a system development lifecycle (SDLC) is essential.</p>
</section><section id="design-clean-code-architecture" class="level3" data-number="12.1.2"><h3 data-number="12.1.2" class="anchored" data-anchor-id="design-clean-code-architecture">
<span class="header-section-number">12.1.2</span> Design clean code architecture</h3>
<p>Having a clean architecture design for your code improves the project’s robustness and flexibility for future changes. For example, we should understand how to separate business logic from other layers; know what should be created as reusable components and what should be written as one-off analysis scripts; write low coupling, high cohesion code, and so on. <span class="citation" data-cites="cleanarch">Martin, Grenning, and Brown (<a href="references.html#ref-cleanarch" role="doc-biblioref">2018</a>)</span> offers some helpful insights on this topic.</p>
</section><section id="set-capability-boundaries" class="level3" data-number="12.1.3"><h3 data-number="12.1.3" class="anchored" data-anchor-id="set-capability-boundaries">
<span class="header-section-number">12.1.3</span> Set capability boundaries</h3>
<p>Knowing what you can do is essential. Create a core capabilities list for your team.</p>
<p>Sometimes, it is also critical to understand <strong>what not to do</strong>. For example, the hidden cost of integrating with external systems or involving other programming languages can be prohibitively high. Remember, a simple, robust solution is almost always preferable to a complex solution that requires high maintenance and constant attention.</p>
</section><section id="contribute-to-the-community" class="level3" data-number="12.1.4"><h3 data-number="12.1.4" class="anchored" data-anchor-id="contribute-to-the-community">
<span class="header-section-number">12.1.4</span> Contribute to the community</h3>
<p>Every individual is limited in some way. The collective thinking from a community could benefit a project in the long term. When designing reusable components, make a plan to share with internal communities, or even better, with the open-source community.</p>
</section></section><section id="the-sdlc" class="level2" data-number="12.2"><h2 data-number="12.2" class="anchored" data-anchor-id="the-sdlc">
<span class="header-section-number">12.2</span> The SDLC</h2>
<p>For A&amp;R deliverables in clinical project development, a clearly defined process or system development lifecycle (SDLC) is crucial to ensure regulatory compliance.</p>
<p>SDLC for the A&amp;R deliverables can be defined in four stages.</p>
<ul>
<li>Planning: a planning stage to define the scope of a project.</li>
<li>Development: a development stage to implement target deliverables.</li>
<li>Validation: a validation stage to verify target deliverables.</li>
<li>Operation: an operation stage to deliver work to stakeholders.</li>
</ul>
<p>Importantly, we should not consider SDLC as a linear process. For example, if the study team identifies a new requirement in a development or validation stage, the team should return to the planning stage to discuss and align the scope. An <a href="https://www.atlassian.com/agile/project-management">agile project management</a> approach is suitable and recommended for an A&amp;R clinical development project. The goal is to embrace an iterative approach that continuously improves target deliverables based on frequent stakeholder feedback.</p>
<p>There are many good tools to implement agile project management strategy, for example:</p>
<ul>
<li><a href="https://docs.github.com/en/issues/organizing-your-work-with-project-boards/managing-project-boards/about-project-boards">GitHub project board</a></li>
<li><a href="https://www.atlassian.com/software/jira">Jira</a></li>
</ul></section><section id="planning" class="level2" data-number="12.3"><h2 data-number="12.3" class="anchored" data-anchor-id="planning">
<span class="header-section-number">12.3</span> Planning</h2>
<p>The planning stage is important in the SDLC lifecycle as the requirements for all A&amp;R deliverables are gathered and documented.</p>
<p>In the planning stage, a project leader should identify all the deliverables, e.g., a list of tables, listings, and figures (TLFs). For each TLFs, the team should prepare the necessary specifications:</p>
<ul>
<li>mock-up tables</li>
<li>validation level (e.g., independent review or double programming)</li>
<li>etc.</li>
</ul>
<p>The project leader should also align work assignments with team members. The purpose is to answer the question of “who is doing what?”</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="lightable-classic table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
<span></span>
</div></th>
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Requirement/Specification
</div></th>
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Developer Testing
</div></th>
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Independent Testing
</div></th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Program Name
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Program Validation Category
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Who
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Status
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Who
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Status
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Who
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; padding-bottom: 0; padding-left: 3px; padding-right: 3px; border: 1px solid #000;"><div style="">
Status
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">count_by</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="even">
<td style="text-align: left; border: 1px solid #000;">fmt_ci</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">fmt_est</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="even">
<td style="text-align: left; border: 1px solid #000;">fmt_num</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">fmt_pval</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Dave</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="even">
<td style="text-align: left; border: 1px solid #000;">tlf-01-disposition.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(255, 255, 0, 255) !important; border: 1px solid #000;">I</td>
</tr>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">tlf-02-population.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Dave</td>
<td style="text-align: left; background-color: rgba(255, 255, 0, 255) !important; border: 1px solid #000;">I</td>
</tr>
<tr class="even">
<td style="text-align: left; border: 1px solid #000;">tlf-03-baseline.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Dave</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Dave</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">tlf-04-efficacy.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Alice</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
<tr class="even">
<td style="text-align: left; border: 1px solid #000;">tlf-05-ae-summary.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Dave</td>
<td style="text-align: left; background-color: rgba(255, 255, 0, 255) !important; border: 1px solid #000;">I</td>
</tr>
<tr class="odd">
<td style="text-align: left; border: 1px solid #000;">tlf-06-ae-spec.Rmd</td>
<td style="text-align: right; border: 1px solid #000;">3</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Carol</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
<td style="text-align: left; border: 1px solid #000;">Bob</td>
<td style="text-align: left; background-color: rgba(0, 255, 0, 255) !important; border: 1px solid #000;">C</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>
</p>
<p>The project lead should also set up a project folder, as discussed in <a href="project-folder.html" class="quarto-xref"><span>Chapter 11</span></a>. The project initiation can be simplified by creating an <a href="https://rstudio.github.io/rstudio-extensions/rstudio_project_templates.html">RStudio project template</a>.</p>
<p>To enable reproducibility, the project leader should also review the startup file (i.e.&nbsp;<code>.Rprofile</code> discussed in <a href="project-folder.html#sec-reproduce" class="quarto-xref"><span>Section 11.2</span></a>) and define:</p>
<ul>
<li>R version</li>
<li>Repository of R packages with a snapshot date</li>
<li>Project package library path</li>
<li>etc.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>After project initiation, modifying <code>.Rprofile</code> will be a risk for reproducibility and should be handled carefully if necessary.</p>
</div>
</div>
</section><section id="development" class="level2" data-number="12.4"><h2 data-number="12.4" class="anchored" data-anchor-id="development">
<span class="header-section-number">12.4</span> Development</h2>
<p>After a project is initiated, the study team starts to develop TLFs based on pre-defined mock-up tables assigned to each team member.</p>
<p>The analysis code and relevant description can be saved in R Markdown files in the <code>vignettes/</code> folder.</p>
<p>The use of R Markdown allows developers to assemble narrative text, code, and its comments in one place to simplify documentation. It would be helpful to create a template and define a name convention for all TLFs deliverables. For example, we can use the <code>tlf_</code> prefix in the filename to indicate that the R Markdown file is for delivering TLFs. Multiple TLFs with similar designs can be included in one R Markdown file.</p>
<p>For example, in the <code>esubdemo</code> project, we have six R Markdown files to create TLFs.</p>
<p>If there are any project-specific R functions that need to be developed, the R functions can be placed in the <code>R/</code> folder as discussed in <a href="project-folder.html#sec-consistency" class="quarto-xref"><span>Section 11.1</span></a>.</p>
</section><section id="validation" class="level2" data-number="12.5"><h2 data-number="12.5" class="anchored" data-anchor-id="validation">
<span class="header-section-number">12.5</span> Validation</h2>
<p>Validation is a crucial stage to ensure the deliverables are accurate and consistent. After the development stage is completed, the project team needs to validate the deliverables, including R Markdown files for TLFs deliverables and project-specific R functions. The level of validation is determined at the define stage.</p>
<p>In an R package development, the validation or testing is completed under the <code>test/</code> folder. The testthat R package can be used to streamline the validation process. More details of the testthat package for R package validation can be found in <a href="https://r-pkgs.org/testing-basics.html">Chapter 12 of the R package book</a>.</p>
<p>It is recommended to have a name convention to indicate the type of validation. For example, we can use <code>test-developer-test</code>, <code>test-independent-test</code>, <code>test-double-programming</code> to classify the validation type.</p>
<p>It is recommended to follow the same organization for files in testthat folder as <code>R/</code> folder and <code>vignettes/</code> folder. Every single file in the <code>R/</code> folder and <code>vignettes/</code> folder should have a testing file saved in the <code>tests/testthat/</code> folder to validate the content.</p>
<p>For example, in <code>esubdemo</code> project, we can have a list of testing files below.</p>
<pre><code>tests/testthat
├── test-independent-test-tlf-01-disposition.R
├── test-independent-test-tlf-02-population.R
├── test-independent-test-tlf-03-baseline.R
├── test-independent-test-tlf-04-efficacy.R
├── test-independent-test-tlf-05-ae-summary.R
├── test-independent-test-tlf-06-ae-spec.R
└── test-independent-test-fmt.R</code></pre>
<p>To validate the content of a table, we can save the last datasets ready for table generation as a <code>.Rdata</code> file. A validator can reproduce the TLF and compare it with the original result saved in the <code>.Rdata</code> file. A test is passed when the results match. Customers can directly review the formatting of the TLFs by comparing them with the mock-up.</p>
<p>To validate a figure, we can use the <a href="https://testthat.r-lib.org/articles/snapshotting.html">snapshot testing</a> strategy.</p>
<p>After the validator completes the testing of project-specific functions and R Markdown files, the process to execute and report testing results is the same for a standard R package. The <code>devtools::test()</code> function automatically executes all testing cases and summarizes the testing results in a report.</p>
<p>After completing the validation, the validator updates the status in a validation tracker. The project lead reviews the tracking sheet to make sure all required activities in the SDLC are completed, and the tracking sheet has been filled correctly. The deliverables are ready for customer review after all the validation steps are completed. Any changes to the output requested by customers are documented.</p>
</section><section id="operation" class="level2" data-number="12.6"><h2 data-number="12.6" class="anchored" data-anchor-id="operation">
<span class="header-section-number">12.6</span> Operation</h2>
<p>After completion of development and required validation of all A&amp;R deliverables, the project lead runs compliance checks for a project-specific R package similar to other R packages. <code>devtools::check()</code> is a convenient way to run compliance checks or <code>R CMD check</code>. <code>R CMD check</code> is an automated check of the contents in the R package for frequently encountered issues before submission to CRAN. Since the project-specific R package is not submitted to CRAN, some checks can be customized and skipped in <code>devtools::check()</code>. The project lead should work with the study team to ensure all reported errors, warnings, and notes by <code>devtools::check()</code> are fixed.</p>
<p>The project lead can also use the R package pkgdown to build a complete website for a project-specific R package. The pkgdown website is a convenient way to run all analyses in batch and integrate outputs in a website, which comprehensively covers project-specific R functions, TLF generation programs, outputs and validation tracking information, etc. For example, in the <code>esubdemo</code> project, we created the pkgdown website at <a href="https://elong0527.github.io/esubdemo/" class="uri">https://elong0527.github.io/esubdemo/</a>.</p>
<p>Many of the tasks in SDLC can be completed automatically. An organization can leverage CI/CD workflow to automatically enable those tasks, such as running testing cases and creating a pkgdown website. For example, in the <code>esubdemo</code> project, we set up <a href="https://github.com/elong0527/esubdemo/actions">GitHub Actions</a> for it. This can be done by using <code>usethis::use_github_action()</code>.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-teamgeek" class="csl-entry" role="listitem">
Fitzpatrick, Brian, and Ben Collins-Sussman. 2012. <em>Team Geek: A Software Developer’s Guide to Working Well with Others</em>. O’Reilly Media.
</div>
<div id="ref-cleanarch" class="csl-entry" role="listitem">
Martin, Robert C, James Grenning, and Simon Brown. 2018. <em>Clean Architecture: A Craftsman’s Guide to Software Structure and Design</em>. Prentice Hall.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/r4csr\.org\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./project-folder.html" class="pagination-link" aria-label="Project folder">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Project folder</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./submission-overview.html" class="pagination-link" aria-label="Overview">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Overview</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/elong0527/r4csr/edit/main/project-management.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/elong0527/r4csr/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/elong0527/r4csr/blob/main/project-management.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div></div></footer></body></html>