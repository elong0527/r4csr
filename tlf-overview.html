<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 1 Overview | R for Clinical Study Reports and Submission</title>
<meta name="author" content="Yilong Zhang">
<meta name="author" content="Nan Xiao">
<meta name="author" content="Keaven Anderson">
<meta name="description" content="1.1 Background In clinical trials, a critical step is to submit trial results to regulatory agencies. Electronic Common Technical Document (eCTD) has become a worldwide regulatory submission...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 1 Overview | R for Clinical Study Reports and Submission">
<meta property="og:type" content="book">
<meta property="og:description" content="1.1 Background In clinical trials, a critical step is to submit trial results to regulatory agencies. Electronic Common Technical Document (eCTD) has become a worldwide regulatory submission...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 1 Overview | R for Clinical Study Reports and Submission">
<meta name="twitter:description" content="1.1 Background In clinical trials, a critical step is to submit trial results to regulatory agencies. Electronic Common Technical Document (eCTD) has become a worldwide regulatory submission...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/table1-1.0/table1_defaults.css" rel="stylesheet">
<script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-MKYDL3PNW1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MKYDL3PNW1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Clinical Study Reports and Submission</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li class="book-part">Delivering TLFs in CSR</li>
<li><a class="active" href="tlf-overview.html"><span class="header-section-number">1</span> Overview</a></li>
<li><a class="" href="disposition.html"><span class="header-section-number">2</span> Disposition</a></li>
<li><a class="" href="population.html"><span class="header-section-number">3</span> Analysis population</a></li>
<li><a class="" href="baseline-characteristics.html"><span class="header-section-number">4</span> Baseline characteristics</a></li>
<li><a class="" href="efficacy-table.html"><span class="header-section-number">5</span> Efficacy table</a></li>
<li><a class="" href="efficacy-figure.html"><span class="header-section-number">6</span> Efficacy figure</a></li>
<li><a class="" href="aesummary.html"><span class="header-section-number">7</span> AE summary</a></li>
<li><a class="" href="specific-ae.html"><span class="header-section-number">8</span> Specific AE</a></li>
<li><a class="" href="assemble.html"><span class="header-section-number">9</span> Assemble TLFs</a></li>
<li class="book-part">Clinical trial project</li>
<li><a class="" href="project-overview.html"><span class="header-section-number">10</span> Overview</a></li>
<li><a class="" href="folder.html"><span class="header-section-number">11</span> Project folder</a></li>
<li><a class="" href="manage.html"><span class="header-section-number">12</span> Project management</a></li>
<li class="book-part">eCTD submission</li>
<li><a class="" href="submission-overview.html"><span class="header-section-number">13</span> Overview</a></li>
<li><a class="" href="submission-package.html"><span class="header-section-number">14</span> Submission package</a></li>
<li><a class="" href="running-environment.html"><span class="header-section-number">15</span> Running environment</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/elong0527/r4csr">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tlf-overview" class="section level1" number="1">
<h1>
<span class="header-section-number">1</span> Overview<a class="anchor" aria-label="anchor" href="#tlf-overview"><i class="fas fa-link"></i></a>
</h1>
<div id="background" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Background<a class="anchor" aria-label="anchor" href="#background"><i class="fas fa-link"></i></a>
</h2>
<p>In clinical trials, a critical step is to submit trial results to regulatory agencies.
<a href="https://en.wikipedia.org/wiki/Electronic_common_technical_document">Electronic Common Technical Document (eCTD)</a>
has become a worldwide regulatory submission standard format.
For example, the United States Food and Drug Administration (US FDA) requires
new drug applications and biologics license applications
<a href="https://www.fda.gov/drugs/electronic-regulatory-submission-and-review/electronic-common-technical-document-ectd">must be submitted using the eCTD format</a>.
The Clinical Data Interchange Standards Consortium (CDISC) provides a
<a href="https://bitbucket.cdisc.org/projects/CED/repos/sdtm-adam-pilot-project/browse">pilot project following ICH E3 guidance</a>.</p>
<p>Within eCTD, clinical study reports (CSRs) are located at module 5.
<a href="https://www.ich.org/page/efficacy-guidelines">ICH E3 guidance</a> provides
a compilation of the structure and content of clinical study reports.</p>
<p>A typical CSR contains full details on the methods and results of an individual clinical study.
In support of the statistical analysis, a large number of tables, listings, and figures are
incorporated into the main text and appendices.
In the CDISC pilot project, an
<a href="https://bitbucket.cdisc.org/projects/CED/repos/sdtm-adam-pilot-project/browse/updated-pilot-submission-package/900172/m5/53-clin-stud-rep/535-rep-effic-safety-stud/5351-stud-rep-contr/cdiscpilot01/cdiscpilot01.pdf">example CSR</a>
is also provided. If you are interested in more examples of clinical study reports,
you can go to the <a href="https://clinicaldata.ema.europa.eu/web/cdp/home">European Medicines Agency (EMA) clinical data website</a>.</p>
<p>Building CSRs is teamwork between clinicians, medical writers, statisticians, statistical programmers,
and other relevant specialists such as experts on biomarkers.
Here, we focus on the work and deliverables completed by statisticians and statistical programmers.
In an organization, they commonly work together to
define, develop, validate and deliver tables, listings, and figures (TLFs) required for a CSR to
summarize the efficacy and/or safety of the pharmaceutical product.
Microsoft Word is widely used to prepare CSR in the pharmaceutical industry.
Therefore, <code>.rtf</code>, <code>.doc</code>, <code>.docx</code> are commonly used formats in their deliverables.</p>
<p>In this chapter, our focus is to illustrate how to create tables, listings, and figures (TLFs) in RTF format
that is commonly used in a CSR. The examples are in compliance with the
<a href="https://www.fda.gov/media/76797/download">FDA’s Portable Document Format (PDF) Specifications</a>.</p>
<div class="rmdnote">
<p>FDA’s PDF specification is a general reference. Each organization can define
more specific TLF format requirements that can be different from the examples in this book.</p>
</div>
</div>
<div id="structure-and-content" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Structure and content<a class="anchor" aria-label="anchor" href="#structure-and-content"><i class="fas fa-link"></i></a>
</h2>
<p>In the rest of this chapter, we are following the
<a href="https://database.ich.org/sites/default/files/E3_Guideline.pdf">ICH E3 guidance</a>
on the structure and content of clinical study reports.</p>
<p>In a CSR, most of TLFs are located in</p>
<ul>
<li>Section 10: Study participants</li>
<li>Section 11: Efficacy evaluation</li>
<li>Section 12: Safety evaluation</li>
<li>Section 14: Tables, listings, and figures referrals but not included in the text</li>
<li>Section 16: Appendices</li>
</ul>
</div>
<div id="datasets" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> Datasets<a class="anchor" aria-label="anchor" href="#datasets"><i class="fas fa-link"></i></a>
</h2>
<p>We used publicly available CDISC pilot
<a href="https://bitbucket.cdisc.org/projects/CED/repos/sdtm-adam-pilot-project/browse/updated-pilot-submission-package/900172/m5/datasets/cdiscpilot01/analysis/adam/datasets">study data located in the CDISC Bitbucket repository</a>.</p>
<p>For simplicity, we have downloaded all these datasets into the <code>data-adam/</code>
folder of this project and converted them from the <code>.xpt</code> format to
the <code>.sas7bdat</code> format.</p>
<p>The dataset structure follows
<a href="https://www.cdisc.org/standards/foundational/adam">CDISC Analysis Data Model (ADaM)</a>.</p>
</div>
<div id="tools" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> Tools<a class="anchor" aria-label="anchor" href="#tools"><i class="fas fa-link"></i></a>
</h2>
<p>In this part, we mainly use the R packages below to illustrate
how to deliver TLFs in a CSR.</p>
<ul>
<li>
<a href="https://www.tidyverse.org/">tidyverse</a>: prepare datasets ready for reporting.</li>
<li>
<a href="https://merck.github.io/r2rtf/">r2rtf</a>: create RTF outputs</li>
</ul>
<div class="rmdnote">
<p>There are other R packages to create TLFs in ASCII, RTF and Word format.
For example, <code>rtables</code>, <code>huxtable</code>, <code>pharmaRTF</code>, <code>gt</code>, <code>officer</code>, <code>flextable</code> etc.
Here we focus on <code>r2rtf</code> to illustrate the concept.<br>
Readers are encouraged to explore other R packages to find the proper tools to fit your purpose.</p>
</div>
<div id="tidyverse" class="section level3" number="1.4.1">
<h3>
<span class="header-section-number">1.4.1</span> tidyverse<a class="anchor" aria-label="anchor" href="#tidyverse"><i class="fas fa-link"></i></a>
</h3>
<p><code>tidyverse</code> is a collection of R packages to simplify the workflow to manipulate,
visualize and analyze data in R.
Those R packages share
<a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html">the tidy tools manifesto</a>
and are easy to use for interactive data analysis.</p>
<p>RStudio provided outstanding <a href="https://www.rstudio.com/resources/cheatsheets/">cheatsheets</a>
and <a href="https://github.com/rstudio-education/remaster-the-tidyverse">tutorials</a> for <code>tidyverse</code>.</p>
<p>There are also books to introduce <code>tidyverse</code>.
We assume the reader have experience in using <code>tidyverse</code> in this book.</p>
<ul>
<li><a href="https://rstudio-education.github.io/tidyverse-cookbook/">The tidyverse cookbook</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
</ul>
</div>
<div id="r2rtf" class="section level3" number="1.4.2">
<h3>
<span class="header-section-number">1.4.2</span> r2rtf<a class="anchor" aria-label="anchor" href="#r2rtf"><i class="fas fa-link"></i></a>
</h3>
<p><code>r2rtf</code> is an R package to create production-ready tables and figures in RTF format.
This R package is designed to</p>
<ul>
<li>provide simple “verb” functions that correspond to each component of a table,
to help you translate a data frame to a table in an RTF file;</li>
<li>enable pipes (<code>%&gt;%</code>);</li>
<li>focus on the <strong>table format</strong> only.
Data manipulation and analysis shall be handled by other R packages (e.g., <code>tidyverse</code>).</li>
</ul>
<p>Before creating an RTF table, we need to</p>
<ul>
<li>figure out the table layout;</li>
<li>split the layout into small tasks in the form of a computer program;</li>
<li>execute the program.</li>
</ul>
<p>We provide a brief introduction of <code>r2rtf</code> and show how to transfer
data frames into table, listing, and figures (TLFs).</p>
<p>Other extended examples and features are covered on the
<a href="https://merck.github.io/r2rtf/articles/index.html"><code>r2rtf</code> package website</a>.</p>
<p>To explore the basic RTF generation verbs in <code>r2rtf</code>,
we will use the dataset <code>r2rtf_adae</code> saved in the <code>r2rtf</code> package.
This dataset contains adverse events (AEs) information from a clinical trial.</p>
<p>We will begin by loading the packages:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span> <span class="co"># Manipulate data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span> <span class="co"># Manipulate data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/r2rtf/">r2rtf</a></span><span class="op">)</span> <span class="co"># Reporting in RTF format</span></span></code></pre></div>
<p>Below is the meaning of relevant variables.
More information can be found on the help page of the dataset (<code><a href="https://merck.github.io/r2rtf/reference/r2rtf_adae.html">?r2rtf_adae</a></code>)</p>
<p>In this example, we consider three variables:</p>
<ul>
<li>USUBJID: Unique Subject Identifier</li>
<li>TRTA: Actual Treatment</li>
<li>AEDECOD: Dictionary-Derived Term</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r2rtf_adae</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">TRTA</span>, <span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;       USUBJID    TRTA                   AEDECOD
#&gt; 1 01-701-1015 Placebo APPLICATION SITE ERYTHEMA
#&gt; 2 01-701-1015 Placebo APPLICATION SITE PRURITUS
#&gt; 3 01-701-1015 Placebo                 DIARRHOEA
#&gt; 4 01-701-1023 Placebo                  ERYTHEMA</code></pre>
<p><code>dplyr</code> and <code>tidyr</code> packages within <code>tidyverse</code> are used
for data manipulation to create a data frame
that contains all the information we want to add in an RTF table.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="va">r2rtf_adae</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">TRTA</span>, <span class="va">AEDECOD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">TRTA</span>, values_from <span class="op">=</span> <span class="va">n</span>, values_fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 4 × 4
#&gt;   AEDECOD        Placebo `Xanomeline High Dose` `Xanomeline Low Dose`
#&gt;   &lt;chr&gt;            &lt;int&gt;                  &lt;int&gt;                 &lt;int&gt;
#&gt; 1 ABDOMINAL PAIN       1                      2                     3
#&gt; 2 AGITATION            2                      1                     2
#&gt; 3 ALOPECIA             1                      0                     0
#&gt; 4 ANXIETY              2                      0                     4</code></pre>
<p>Now we have a dataset <code>tbl</code> in preparing the final RTF table.</p>
<p><code>r2rtf</code> aims to provide one function for each type of table layout.
Commonly used verbs include:</p>
<ul>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_page.html">rtf_page()</a></code>: RTF page information</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_title.html">rtf_title()</a></code>: RTF title information</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader()</a></code>: RTF column header information</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body()</a></code>: RTF table body information</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_footnote.html">rtf_footnote()</a></code>: RTF footnote information</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_source.html">rtf_source()</a></code>: RTF data source information</li>
</ul>
<p>All these verbs are designed to enable the usage of pipes (<code>%&gt;%</code>).
A full list of all functions can be found in the
<a href="https://merck.github.io/r2rtf/reference/index.html">r2rtf package function reference manual</a>.</p>
<p>A minimal example below illustrates how to combine verbs using pipes to create an RTF table.</p>
<ul>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body()</a></code> is used to define table body layout.</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode()</a></code> transfers table layout information into RTF syntax.</li>
<li>
<code><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf()</a></code> save RTF encoding into a file with file extension <code>.rtf</code>
</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Step 1 Add table attributes</span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Step 2 Convert attributes to RTF encode</span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/intro-ae1.rtf"</span><span class="op">)</span> <span class="co"># Step 3 Write to a .rtf file</span></span></code></pre></div>
<embed src="tlf/intro-ae1.pdf" width="100%" height="400px" style="display: block; margin: auto;" type="application/pdf"></embed><p>If we want to adjust the width of each column to
provide more space to the first column,
this can be achieved by updating the <code>col_rel_width</code> argument
in the <code><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body()</a></code> function.</p>
<p>In this example, the input of <code>col_rel_width</code> is a vector
with the same length for the number of columns.
This argument defines the relative width of each column
within a pre-defined total column width.</p>
<p>In this example, the defined relative width is <code>3:2:2:2</code>.
Only the ratio of <code>col_rel_width</code> is used.
Therefore it is equivalent to use <code>col_rel_width = c(6, 4, 4, 4)</code>
or <code>col_rel_width = c(1.5, 1, 1, 1)</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body</a></span><span class="op">(</span>col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># define relative width</span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/intro-ae2.rtf"</span><span class="op">)</span></span></code></pre></div>
<embed src="tlf/intro-ae2.pdf" width="100%" height="400px" style="display: block; margin: auto;" type="application/pdf"></embed><p>In the previous example, we found the issue of a misaligned column header.
We can fix the issue by using the <code><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader()</a></code> function.</p>
<p>In <code><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader()</a></code>, the <code>colheader</code> argument is used to provide the content of the column header.
We use <code>"|"</code> to separate the columns.</p>
<p>In the example below, <code>"Adverse Events | Placebo | Xanomeline High Dose | Xanomeline Low Dose"</code>
define a column header with 4 columns.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader</a></span><span class="op">(</span></span>
<span>    colheader <span class="op">=</span> <span class="st">"Adverse Events | Placebo | Xanomeline High Dose | Xanomeline Low Dose"</span>,</span>
<span>    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body</a></span><span class="op">(</span>col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/intro-ae3.rtf"</span><span class="op">)</span></span></code></pre></div>
<embed src="tlf/intro-ae3.pdf" width="100%" height="400px" style="display: block; margin: auto;" type="application/pdf"></embed><p>In <code>rtf_*()</code> functions such as <code><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body()</a></code>, <code><a href="https://merck.github.io/r2rtf/reference/rtf_footnote.html">rtf_footnote()</a></code>,
the <code>text_justification</code> argument is used to align text.
Default is <code>"c"</code> for center justification.
To vary text justification by column, use character vector with length of vector equals to
number of columns displayed (e.g., <code>c("c", "l", "r")</code>).</p>
<p>All possible inputs can be found in the table below.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">r2rtf</span><span class="fu">:::</span><span class="fu"><a href="https://merck.github.io/r2rtf/reference/justification.html">justification</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   type      name rtf_code_text rtf_code_row
#&gt; 1    l      left          \\ql       \\trql
#&gt; 2    c    center          \\qc       \\trqc
#&gt; 3    r     right          \\qr       \\trqr
#&gt; 4    d   decimal          \\qj             
#&gt; 5    j justified          \\qj</code></pre>
<p>Below is an example to make the first column left-aligned and center-aligned for the rest.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body</a></span><span class="op">(</span>text_justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/intro-ae5.rtf"</span><span class="op">)</span></span></code></pre></div>
<embed src="tlf/intro-ae5.pdf" width="100%" height="400px" style="display: block; margin: auto;" type="application/pdf"></embed><p>In <code>rtf_*()</code> functions such as <code><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body()</a></code>, <code><a href="https://merck.github.io/r2rtf/reference/rtf_footnote.html">rtf_footnote()</a></code>, etc.,
<code>border_left</code>, <code>border_right</code>, <code>border_top</code>, and <code>border_bottom</code> control cell borders.</p>
<p>If we want to remove the top border of <code>"Adverse Events"</code> in the header,
we can change the default value <code>"single"</code> to <code>""</code> in the <code>border_top</code> argument, as shown below.</p>
<p><code>r2rtf</code> supports 26 different border types. The details can be found on
the <a href="https://merck.github.io/r2rtf/articles/rtf-row.html#border-type">r2rtf package website</a>.</p>
<p>In this example, we also demonstrate the possibility of adding multiple column headers.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader</a></span><span class="op">(</span></span>
<span>    colheader <span class="op">=</span> <span class="st">" | Treatment"</span>,</span>
<span>    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html">rtf_colheader</a></span><span class="op">(</span></span>
<span>    colheader <span class="op">=</span> <span class="st">"Adverse Events | Placebo | Xanomeline High Dose | Xanomeline Low Dose"</span>,</span>
<span>    border_top <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"single"</span>, <span class="st">"single"</span>, <span class="st">"single"</span><span class="op">)</span>,</span>
<span>    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html">rtf_body</a></span><span class="op">(</span>col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/intro-ae7.rtf"</span><span class="op">)</span></span></code></pre></div>
<embed src="tlf/intro-ae7.pdf" width="100%" height="400px" style="display: block; margin: auto;" type="application/pdf"></embed><p>In the <code>r2rtf</code> R package <a href="https://merck.github.io/r2rtf/articles/r2rtf.html">get started</a> page,
there are more examples to illustrate how to customize</p>
<ul>
<li>title, subtitle</li>
<li>footnote, data source</li>
<li>special character</li>
<li>etc.</li>
</ul>
<p>Those features will be introduced when we first use them in the rest of the chapters.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="preface.html">Preface</a></div>
<div class="next"><a href="disposition.html"><span class="header-section-number">2</span> Disposition</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tlf-overview"><span class="header-section-number">1</span> Overview</a></li>
<li><a class="nav-link" href="#background"><span class="header-section-number">1.1</span> Background</a></li>
<li><a class="nav-link" href="#structure-and-content"><span class="header-section-number">1.2</span> Structure and content</a></li>
<li><a class="nav-link" href="#datasets"><span class="header-section-number">1.3</span> Datasets</a></li>
<li>
<a class="nav-link" href="#tools"><span class="header-section-number">1.4</span> Tools</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidyverse"><span class="header-section-number">1.4.1</span> tidyverse</a></li>
<li><a class="nav-link" href="#r2rtf"><span class="header-section-number">1.4.2</span> r2rtf</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/elong0527/r4csr/blob/master/tlf-overview.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/elong0527/r4csr/edit/master/tlf-overview.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Clinical Study Reports and Submission</strong>" was written by Yilong Zhang, Nan Xiao, Keaven Anderson. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
